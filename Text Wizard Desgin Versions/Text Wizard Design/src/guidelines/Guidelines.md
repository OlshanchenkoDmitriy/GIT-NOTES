# Гайдлайны для инструмента пакетной обработки текста

## Общие принципы

### Архитектура и код
* Используйте модульную архитектуру - каждая операция должна быть независимым модулем
* Все операции должны быть pure functions без побочных эффектов
* Сохраняйте иммутабельность - всегда создавайте новые объекты вместо изменения существующих
* Используйте TypeScript строго - избегайте `any`, всегда типизируйте пропы и состояния
* Разделяйте компоненты на логические файлы - не более 300 строк на компонент
* Все утилиты должны иметь unit-тесты (планируется)

### UX принципы
* **Неразрушающее редактирование** - пользователь всегда может отменить действие
* **Предварительный просмотр** - показывайте результат до применения операций
* **Прогрессивное раскрытие** - сложные настройки скрывайте в коллапсы
* **Мгновенная обратная связь** - используйте тосты для подтверждения действий
* **Доступность** - все интерактивные элементы должны работать с клавиатуры

---

## Дизайн-система

### Цветовая схема
Используем темную тему по умолчанию с темно-синими/серыми оттенками:
* Фон: `#0f1419` - основной фон приложения
* Карточки: `#1a1f29` - фон карточек и панелей  
* Основной цвет: `#3b82f6` - синий для активных элементов
* Границы: `#374151` - серый для разделителей
* Текст: `#e6e6e6` - основной цвет текста

### Отступы и размеры
* Базовая единица: `4px` (0.25rem)
* Стандартные отступы: `16px` (1rem), `24px` (1.5rem)
* Радиус скругления: `10px` (0.625rem)
* Минимальная область тапа: `44px` для мобильных
* Максимальная ширина контента: `7xl` (80rem)

### Типографика
* Базовый размер шрифта: `14px` (десктоп), `16px` (мобильный)
* Межстрочный интервал: `1.5` для всех элементов
* Используйте системные шрифты с `-apple-system` fallback

---

## Компоненты

### Операции (OperationItem)
* Каждая операция должна иметь:
  - Переключатель включения/выключения (Switch)
  - Возможность сворачивания настроек (Collapsible)
  - Кнопку предварительного просмотра
  - Drag handle для перестановки
  - Счетчик затронутых элементов
* Настройки операции сворачиваются по умолчанию после создания
* Валидация должна происходить в реальном времени
* Ошибки показываются прямо в интерфейсе операции

### Кнопки
* **Primary** - только одна на экране, для главного действия (Применить)
* **Secondary/Outline** - для вторичных действий (Отменить, Сбросить)
* **Destructive** - для удаления (красного цвета)
* **Ghost** - для иконочных кнопок в панелях
* Всегда включайте `loading` состояние для async операций

### Панели и карточки
* Все основные блоки в `Card` компонентах
* Используйте `CardHeader` с `CardTitle` для заголовков
* `CardContent` для основного содержимого
* Фиксированная высота для панелей на десктопе: `600px`
* Адаптивная высота на мобильных

### Формы и инпуты
* Всегда используйте `Label` для полей ввода
* Placeholder должен быть информативным, но кратким
* Валидация показывается под полем красным текстом
* Regex поля должны иметь монопространственный шрифт

---

## Адаптивность

### Мобильная версия (< 1024px)
* Вертикальная компоновка вместо колонок
* Вкладки (Tabs) для переключения между текстовыми областями
* Увеличенные области тапа (минимум 44px)
* Фиксированная нижняя панель с safe-area

### Десктопная версия (≥ 1024px)
* Трехколоночная компоновка: Настройки | Операции | Текст
* Горизонтальное расположение панелей
* Hover эффекты для интерактивных элементов
* Keyboard shortcuts (планируется)

---

## Специфичные правила

### Обработка текста
* Все операции должны сохранять исходную кодировку
* Обработка происходит построчно для больших файлов
* Regex операции должны иметь timeout (планируется)
* Показывайте прогресс для операций >1 секунды

### История изменений (Undo/Redo)
* Максимум 50 состояний в истории
* Сохраняем полное состояние: `originalText + operations`
* Каждое действие должно иметь описательное название
* История очищается при сбросе приложения

### Пресеты
* Имена пресетов должны быть уникальными
* Сохранение только enabled операций
* Автосохранение в localStorage
* Экспорт/импорт пресетов (планируется)

### Тосты и уведомления
* Успех (зеленый): Сохранение, загрузка, копирование
* Ошибка (красный): Валидация, файлы, сеть
* Информация (синий): Отмена/повтор действий
* Время показа: 3 секунды (стандарт), 5 секунд (ошибки)

---

## Производительность

### Оптимизация
* Используйте `useCallback` для обработчиков событий
* `useMemo` для тяжелых вычислений
* Дебаунс для текстовых полей (300ms)
* Ленивая загрузка для больших файлов

### Память
* Очистка event listeners в useEffect cleanup
* Ограничение размера файлов: 10MB
* Предупреждение при больших объемах текста
* Автосохранение каждые 30 секунд (планируется)

---

## Доступность

### Клавиатурная навигация
* Tab order должен быть логичным (слева направо, сверху вниз)
* Все интерактивные элементы доступны с клавиатуры
* Escape закрывает модальные окна
* Enter активирует кнопки по умолчанию

### Screen readers
* Все изображения имеют alt text
* Используйте semantic HTML (header, main, aside)
* ARIA labels для сложных компонентов
* Focus trap в модальных окнах

### Контрастность
* Минимальный контраст 4.5:1 для обычного текста
* Минимальный контраст 3:1 для крупного текста  
* Четкие focus состояния (2px outline)
* Поддержка `prefers-reduced-motion`