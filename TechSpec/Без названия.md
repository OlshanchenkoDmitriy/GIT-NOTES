# Text Wizard — Полный функционал v1.0

> **Цель:** офлайн-инструмент для пакетной обработки текста + Prompt Editor.  
> **Платформы:** React + Vite / React Native (Expo) / Tauri.  
> **Структура:** Text Processor · Prompt Editor · Suno (placeholder).

---

## 1. Навигация / макет
| Устройство | Макет |
|------------|-------|
| Mobile     | Вертикальный стэк, вкладки «Input / Result», фикс-бар снизу |
| Desktop    | 3 колонки: Settings | Operations | Text |

---

## 2. Общие UX-принципы
* Undo/Redo ≤ 50 шагов (неразрушающее редактирование)  
* Live-preview (+ diff) перед применением  
* Toast: success / error / info  
* Прогрессивное раскрытие (collapsible настройки)  
* Автосохранение state → local DB каждые 30 с  
* Прогресс-бар для операций > 1 с  

---

## 3. Модули

### 3.1 Text Processor
* **Ввод/вывод**  
  – Вкладки *Input / Result* (+ counters)  
  – Быстрые действия: Paste · Clear · Swap · Copy  
  – File upload ≤ 10 MB (size warning)

* **Операции** (в очереди, drag-drop, on/off):  
  1. Remove chars (+ «chains = token»)  
  2. Regex (find/replace, match count, highlight, timeout)  
  3. Change case (UPPER/lower/Title/invert)  
  4. Trim (per-line)  
  5. Dedupe lines  
  6. Sort (alpha/length/random)  
  7. Line numbers (1., (1), 01, [1])  
  8. Delete blank lines  
  9. Prefix / Suffix  
  10. Slice head (N chars)  
  *(+ optional: length filter, e-mail / URL extractor)*

* **История + Пресеты**  
  – Undo/Redo сохраняет текст + pipeline  
  – Preset = enabled ops + order + params (unique name, JSON / SQLite)  
  – Import / Export JSON

### 3.2 Prompt Editor
* Шаблон полей: **Context · Task · Format · Constraints · Examples**  
* Авто-структура + autoplaceholders `[INPUT] / [OUTPUT] / [VAR]`  
* Удаление стоп-фраз  
* Markdown-форматирование  
* Пресеты под модели (GPT / Claude / Gemini / Sora)  
* Copy-buttons: per-section & all  
* Diff-highlight до/после

### 3.3 Suno
* Раздел-заглушка: видим в навигации · текст «Будет доработано позже».

---

## 4. Дизайн-система
| Токен | Значение |
|-------|----------|
| **Фон** | `#0F1419` |
| **Карточка** | `#1A1F29` |
| **Акцент** | `#3B82F6` |
| **Граница** | `#374151` |
| **Текст** | `#E6E6E6` |

* База 4 px (16 / 24 px отступы) · r = 10 px · системные шрифты 14 / 16 px.  
* Компоненты = shadcn `Card`, `Button`, Radix Dialog.  
* States: default · hover · active · disabled · error · success · loading.  

---

## 5. Доступность
WCAG AA контраст ≥ 4.5 : 1 · focus outline 2 px · Tab-order логичен · Escape = close modal · все интерактивы с клавиатуры · ARIA-labels · `prefers-reduced-motion`.

---

## 6. Производительность / надёжность
* Обработка построчно; heavy ops → `useWorker`/`useMemo`  
* Debounce 300 мс на inputs  
* File limit 10 MB; warn > 80 % limit  
* Memory cleanup в `useEffect`  
* SQLite таблицы: presets | history | settings

---

## 7. Технологии
* **Core:** React 18, TypeScript strict, Tailwind CSS tokens  
* **Libs:** Radix UI, shadcn/ui, lucide-react, sonner (toast)  
* **Build:** Vite (web) · Expo (RN) · Tauri (desktop)  
* **Scripts:** `dev / build / preview`

---

## 8. QA-чеклист (кратко)
1. Paste → counters OK · `Apply` enabled  
2. Empty input → friendly blank screen  
3. Remove chars (single & chains) → результат корректен  
4. Regex error → inline error, UI живой  
5. Undo/Redo восстанавливает всё  
6. Preset save → reload → identical output  
7. Import / export JSON match 100 %  
8. Mobile: бар снизу не закрыт клавиатурой  
9. 100 k + chars → UI не фризит, прогресс показывает  

---

*Документ обновляется при любом изменении фич.  
При релизе пункты DoD помечаются ✅.*
