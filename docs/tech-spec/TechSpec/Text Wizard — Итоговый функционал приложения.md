# Text Wizard — Итоговый функционал приложения

## 0. Общее
- **Назначение:** офлайн-инструмент для пакетной обработки текста + Prompt Editor (Suno — placeholder).
- **Основы:** модульная архитектура; каждая операция независима, включается/выключается, переставляется; предпросмотр; undo/redo; пресеты.
- **Цель:** автоматизация рутинной обработки текстов, гибкие цепочки трансформаций, простота для непрограммистов.

---

## 1. Навигация и структура
- Три раздела: **Text Processor / Prompt Editor / Suno (placeholder)**.
- Мобильная версия — основная; планшет/десктоп адаптив.
- На мобиле: вертикальная компоновка, вкладки для переключения текста, фиксированный нижний бар (safe-area).
- Десктоп: три колонки (Настройки | Операции | Текст).

---

## 2. Общие UX-принципы
- Неразрушающее редактирование (undo/redo до 50 шагов).
- Предварительный просмотр (до/после, diff-подсветка).
- Мгновенная обратная связь (toast: успех/ошибка/копирование).
- Прогрессивное раскрытие (сложные настройки в collapsible).
- Доступность: WCAG AA, Tab-order, Escape закрывает модалки, ARIA-labels, focus trap, prefers-reduced-motion, тапы ≥ 44px.

---

## 3. Text Processor — функции
### Ввод/вывод
- Две вкладки: **Исходный текст / Результат**.
- Счётчики символов/слов/строк (real-time).
- Быстрые действия: Вставить / Очистить / Поменять местами / Копировать.
- Загрузка файла: имя, размер, удалить/заменить, парсинг текста.

### Операции
- **Удаление символов:** поле ввода символов; режим «цепочки = токены».
- **Regex поиск/замена:** поля Шаблон/Замена, валидатор, счётчик матчей, подсветка, timeout.
- **Регистры:** UPPERCASE / lowercase / Title Case / invert.
- **Trim:** обрезка пробелов по краям строк.
- **Дедупликация строк:** уникализация, сохранение порядка.
- **Сортировка:** алфавит / длина / случайно.
- **Нумерация строк:** 1., (1), 01, [1].
- **Очистка пустых строк:** полностью пустые или с пробелами.
- **Префикс/суффикс:** добавление к каждой строке.
- **Заголовки строк:** первые N символов.
- *(опц.)* фильтрация по длине, извлечение email/URL.

### Управление операциями
- Добавить из списка; drag&drop порядок; включить/выключить; свернуть/удалить; предпросмотр; run step/run all.
- Счётчик эффекта (сколько строк/символов затронуто).

### История и пресеты
- Undo/Redo (50 шагов, текст + состояние операций).
- Пресеты: уникальные имена, сохраняют enabled + порядок + параметры.
- Автосохранение каждые 30 сек (localStorage/SQLite).
- Импорт/экспорт JSON (совместимость).

### Надёжность и производительность
- Обработка больших текстов построчно; индикатор прогресса >1 сек.
- Ограничение файлов: 10MB; предупреждение при превышении.
- Не блокирует UI; debounce 300мс на ввод.

---

## 4. Prompt Editor — функции
- Поля промта: цель / модель / ограничения / стиль / примеры.
- Авто-структура: Контекст / Задача / Формат / Ограничения.
- Удаление стоп-фраз («Конечно, вот пример» и др.).
- Форматирование Markdown (заголовки, списки, код-блоки).
- Placeholder-система: `[INPUT]`, `[OUTPUT]`, `[VAR]`.
- Пресеты для моделей (GPT, Claude, Gemini, Sora).
- Копи-кнопки по секциям и целиком.
- Diff-подсветка до/после.
- Сохранение/загрузка пресетов (SQLite + JSON).

---

## 5. Suno — placeholder
- Видимый раздел в навигации.
- Текст: «Будет доработано позже».  
- Функционал отсутствует.

---

## 6. Дизайн и UI
- Тёмная тема (через CSS-переменные).
- Цвета: фон `#0f1419`, карточки `#1a1f29`, основной синий `#3b82f6`, границы `#374151`, текст `#e6e6e6`.
- Отступы: базовая единица 4px; стандартные — 16/24px; радиус 10px.
- Минимальная область тапа: 44px.
- Типографика: системные шрифты; 14px (desktop), 16px (mobile), line-height 1.5.
- Компоненты в карточках (`CardHeader`, `CardContent`).
- Кнопки: Primary (главное действие), Secondary/Outline (отмена, сброс), Destructive (удаление), Ghost (иконки). Все async с loading state.
- Состояния: default / hover / active / disabled / error / success.

---

## 7. Технологии
- **Стек:** Vite + React, Radix (Dialog и др.), shadcn/ui, lucide-react, sonner.
- Tailwind с токенами темы (из Figma).
- SQLite (Tauri/React Native) + JSON для пресетов.
- NPM-скрипты: dev / build / preview.

---

## 8. Ключевые сценарии (QA)
- Вставка текста → обновление счётчиков, `Применить` активен.
- Пустой ввод → `Применить` неактивен, дружелюбный экран.
- Копирование результата → toast «Скопировано».
- Проверка всех операций (Remove, Regex, Trim, Case, Dedupe).
- Undo/Redo возвращает текст и операции.
- Сохранённый пресет работает после перезапуска.
- Импорт/экспорт JSON без потерь.
- Длинный ввод (100k+ символов) не зависает; прогресс отображается.
- Мобильная клавиатура не перекрывает fixed-бар.

---
